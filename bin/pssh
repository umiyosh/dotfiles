#!/usr/bin/env zsh

set -eu

function ssh() {
    local window_name=$(tmux display -p '#{window_name}')
    command ssh $@
    tmux rename-window $window_name
    tmux set-window-option -u automatic-rename
}

hosts=("$@")

if [[ $#hosts -gt 1 ]]; then
  tcmd ssh $hosts
else
  ssh $hosts
fi
