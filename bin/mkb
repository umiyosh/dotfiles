#!/usr/bin/env bash
# このスクリプトは日本語文字を受け取り、それを基にコンベンショナルコミットメッセージを英語で作成する目的で編成されました。
# AIコミットのようなツールは楽でいいけど、作業意図を明確に残せない。その部分を改善するために作成されました。

PROMPT=$(cat << 'EOF'
## 依頼内容
- 入力したテキストから作業意図を的確に定めるgitブランチ名を訂正してください。
- ブランチ名は次の規則に従ってください。
  - {作業Prefix}/{作業内容}
- 作業Prefixは次のいずれかを使用してください。
  - chore - あまり重要ではない、他愛ない修正。prefix判別に迷いがある場合は基本的にこちらを使用すること
  - test - 足りないテストの追加
  - feat - 新機能
  - fix - バグの修正
  - docs - ドキュメンテーションのみの変更
  - refactor - バグの修正でも機能の追加でもないコード変更。
  - style - マークアップ、ホワイトスペース、書式設定、セミコロンの欠落...見た目の修正, フォーマットなど
  - CI - CI関連の変更
  - perf - パフォーマンスを向上させるコード変更
- ブランチ名以外の要素を出力しないこと。ブランチ名のみを出力してください。
EOF
)
pbpaste | sgpt --code "$PROMPT" | pbcopy
