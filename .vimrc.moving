"-------------------------------------------------------------------------------
" ç§»å‹•è¨­å®š Move
"-------------------------------------------------------------------------------

" ã‚«ãƒ¼ã‚½ãƒ«ã‚’è¡¨ç¤ºè¡Œã§ç§»å‹•ã™ã‚‹ã€‚è«–ç†è¡Œç§»å‹•ã¯<C-n>,<C-p>
nnoremap h <Left>
nnoremap j gj
nnoremap k gk
nnoremap l <Right>
nnoremap <Down> gj
nnoremap <Up>   gk

" 0, 9ã§è¡Œé ­ã€è¡Œæœ«ã¸
nmap 1 0
nmap 0 ^
nmap 9 $

" insert mode ã§ã®ç§»å‹•
inoremap  <C-e> <END>
inoremap  <C-a> <HOME>
noremap  <C-e> $
noremap  <C-a> ^

"<space>j, <space>kã§ç”»é¢é€ã‚Š
noremap <Space>j <C-f>
noremap <Space>k <C-b>

" spaceã§æ¬¡ã®bufferã¸ã€‚back-spaceã§å‰ã®bufferã¸
nmap <Space><Space> :MBEbn<CR>
nmap <BS><BS> :MBEbp<CR>

" F2ã§å‰ã®ãƒãƒƒãƒ•ã‚¡
map <F2> <ESC>:bp<CR>
" F3ã§æ¬¡ã®ãƒãƒƒãƒ•ã‚¡
map <F3> <ESC>:bn<CR>
" F4ã§ãƒãƒƒãƒ•ã‚¡ã‚’å‰Šé™¤ã™ã‚‹
map <F4> <ESC>:bnext \| bdelete #<CR>
command! Bw :bnext \| bdelete #

"ãƒ•ãƒ¬ãƒ¼ãƒ ã‚µã‚¤ã‚ºã‚’æ€ æƒ°ã«å¤‰æ›´ã™ã‚‹
map <kPlus> <C-W>+
map <kMinus> <C-W>-

" å‰å›çµ‚äº†ã—ãŸã‚«ãƒ¼ã‚½ãƒ«è¡Œã«ç§»å‹•
autocmd BufReadPost * if line("'\"") > 0 && line("'\"") <= line("$") | exe "normal g`\"" | endif

" æœ€å¾Œã«ç·¨é›†ã•ã‚ŒãŸä½ç½®ã«ç§»å‹•
nnoremap gb '[
nnoremap gp ']

" å¯¾å¿œã™ã‚‹æ‹¬å¼§ã«ç§»å‹•
nnoremap ( %
nnoremap ) %

" æœ€å¾Œã«å¤‰æ›´ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã‚’é¸æŠã™ã‚‹
nnoremap gc  `[v`]
vnoremap gc <C-u>normal gc<Enter>
onoremap gc <C-u>normal gc<Enter>

" ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã®å˜èªã‚’yankã™ã‚‹
nnoremap vy vawy

" çŸ©å½¢é¸æŠã§è‡ªç”±ã«ç§»å‹•ã™ã‚‹
set virtualedit+=block

"ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ¢ãƒ¼ãƒ‰æ™‚vã§è¡Œæœ«ã¾ã§é¸æŠ
vnoremap v $h

" CTRL-hjklã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ç§»å‹•
nnoremap <C-j> <C-w>j
nnoremap <C-k> <C-w>k
nnoremap <C-l> <C-w>l
nnoremap <C-h> <C-w>h

" git-diff-aware version of gf commands.
" http://labs.timedia.co.jp/2011/04/git-diff-aware-gf-commands-for-vim.html
nnoremap <expr> gf  <SID>do_git_diff_aware_gf('gf')
nnoremap <expr> gF  <SID>do_git_diff_aware_gf('gF')
nnoremap <expr> <C-w>f  <SID>do_git_diff_aware_gf('<C-w>f')
nnoremap <expr> <C-w><C-f>  <SID>do_git_diff_aware_gf('<C-w><C-f>')
nnoremap <expr> <C-w>F  <SID>do_git_diff_aware_gf('<C-w>F')
nnoremap <expr> <C-w>gf  <SID>do_git_diff_aware_gf('<C-w>gf')
nnoremap <expr> <C-w>gF  <SID>do_git_diff_aware_gf('<C-w>gF')

function! s:do_git_diff_aware_gf(command)
  let target_path = expand('<cfile>')
  if target_path =~# '^[ab]/'  " with a peculiar prefix of git-diff(1)?
    if filereadable(target_path) || isdirectory(target_path)
      return a:command
    else
      " BUGS: Side effect - Cursor position is changed.
      let [_, c] = searchpos('\f\+', 'cenW')
      return c . '|' . 'v' . (len(target_path) - 2 - 1) . 'h' . a:command
    endif
  else
    return a:command
  endif
endfunction

" ãƒãƒƒãƒ•ã‚¡æ“ä½œé–¢é€£
nnoremap <Leader>kk      :bd<CR>
nnoremap <Leader>kK      :bd!<CR>
nnoremap <Leader>fk      :Kwbd<CR>
nnoremap <Leader>bo      :Bufonly<CR>
nnoremap <Leader>wk      :w<CR> :bd<CR>
nnoremap <Leader>wK      :w<CR> :bd!<CR>
nnoremap <Leader>cc      :new<CR>

" ã‚¤ãƒ³ã‚µãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ‰æ™‚ã«ã‚«ãƒ¼ã‚½ãƒ«ã‚­ãƒ¼ç§»å‹•(ctrl+ã¨ã‹ã¶ã‚‹ã‘ã©ï¼‰
imap [A <Up>
imap [B <Down>
imap [C <Right>
imap [D <Left>

" %ã§ç§»å‹•ã™ã‚‹ãƒšã‚¢ã®è¿½åŠ "<":">"
set matchpairs=(:),{:},[:],<:>
