#!/usr/bin/env zsh

#概要：git statusで出てくるファイルをいろいろする
workDir=$(pwd)
gitRootDir=$(git rev-parse --show-toplevel)
cd "$gitRootDir"
(git status --porcelain;git ls-files) | peco | perl -pe 's/^( ?D )|( ?UU )|( ?MM )|( ?M )|( ?A )|(\?\? )//g' |perl -pe 's/^ +//g'|\
  pecoAfterAction "git add" \
    "git checkout" \
    "git reset HEAD" \
    "git diff" \
    "git vdiff" \
    "git diff --cached" \
    "git vdiff --cached" \
    "git rm" \
    "vi" \
    'vimdiff' \
    'cat'\
    'open' \
    "%%STDIN%% cat" \
    "%%STDIN%% pbcopy" \
    "%%STDIN%% paaPbCopyFilename" \
    "%%STDIN%% paaTovim" \
    "%%STDIN%% pecoPipe" \
    "%%STDIN%% paaSafeRm" \
    "paaInputCommandAny"
_executeTmuxBuffer "cd '$workDir'"

